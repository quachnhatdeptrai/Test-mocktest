<%- include('partials/head', { title: "Quach Nhat's Weekly Readings" }) %>

<!-- Header, the first section of the page-->
<header class="site-header">
    <img src="/images/logo.png" alt="logo" width="64" height="64">
    <nav class="site-nav">
        <a href="/">Home Page</a>
    </nav>
</header>

<!-- Main content -->
<main class="flex-grow-1">
    <section class="row g-4 align-items-start mb-5">
        <!-- Your profile-->
        <aside id="profile" class="col-lg-4">
            <div class="profile-card">
                <div class="profile-avatar">
                    <img src="/images/profile.jpg" alt="Portrait of Quach Nhat">
                </div>
                <p class="profile-greeting">Hi, I'm</p>
                <h1 class="profile-name">Quach Nhat</h1>
                <p class="profile-id">s3982412</p>
                <p class="profile-email">s3982412@rmit.edu.vn</p>
            </div>
        </aside>
        <div class="col-lg-8">
            <!-- The reading list is shown here-->
            <section id="reading-list">
                <div class="reading-header">
                    <h2 class="reading-title">Recommended <span>READING LIST</span></h2>
                    <form method="post" action="/">
                        <input type="hidden" name="listId" value="<%= listId %>">
                        <button class="btn btn-primary btn-sm" type="submit" id="refresh-button">Refresh</button>
                    </form>
                </div>
                <p class="text-muted mb-4">Pick a title to explore details and related reads for the week.</p>

                <% readingDays.forEach(function (dayItem) { %>
                    <div class="reading-day">
                        <h3><%= dayItem.day %></h3>
                        <% if (dayItem.book) { %>
                            <article class="reading-card">
                                <div class="reading-content">
                                    <a class="book-link" href="/book/<%= dayItem.book.slug %>"><%= dayItem.book.title %> by <%= dayItem.book.author %></a>
                                    <p><%= dayItem.book.description %></p>
                                    <span class="badge text-bg-light"><%= dayItem.category %></span>
                                </div>
                                <img src="<%= dayItem.book.image %>" alt="<%= dayItem.book.title %> cover">
                            </article>
                        <% } else { %>
                            <p class="text-muted">No book available for this slot right now.</p>
                        <% } %>
                    </div>
                <% }) %>
            </section>
        </div>
    </section>
</main>
    
 <!-- Footer -->
<%- include('partials/footer') %>
<script>
    const refreshButton = document.getElementById('refresh-button');
    if (refreshButton) {
        refreshButton.addEventListener('click', () => {
            refreshButton.textContent = 'Refreshing...';
            refreshButton.disabled = true;
        });
    }
</script>
</body>
</html>